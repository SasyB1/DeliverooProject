<div class="text-center pb-3 color-bg color-text">
  <button class="btn btnClr mx-2" (click)="filtraOrdini('Tutti')">
    {{ "ORDERS.ALL" | translate }}
  </button>
  <button class="btn btnClr mx-2" (click)="filtraOrdini('In Corso')">
    {{ "ORDERS.IN_PROGRESS" | translate }}
  </button>
  <button class="btn btnClr mx-2" (click)="filtraOrdini('Consegnato')">
    {{ "ORDERS.DELIVERED" | translate }}
  </button>
</div>

<div
  *ngIf="filtratiOrdini.length > 0; else noOrdini"
  class="color-bg color-text"
>
  <h2 class="text-center">
    {{ "ORDERS.ORDERS_FOR_RESTAURANT" | translate }}
  </h2>
  <ul class="list-group">
    <li
      *ngFor="let ordine of filtratiOrdini"
      class="list-group-item color-bg color-text"
    >
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <p>{{ "ORDERS.ORDER_ID" | translate }}: {{ ordine.iD_Ordine }}</p>
          <p>
            {{ "ORDERS.ORDER_DATE" | translate }}:
            {{ ordine.dataOrdine | date : "short" }}
          </p>
          <p>{{ "ORDERS.STATUS" | translate }}: {{ ordine.stato }}</p>

          <div class="progress my-2">
            <div
              class="progress-bar"
              [class.bg-success]="ordine.stato === 'Consegnato'"
              [style.width]="getProgressWidth(ordine.stato)"
              role="progressbar"
              aria-valuenow="25"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              {{ ordine.stato }}
            </div>
          </div>
        </div>
        <button
          *ngIf="ordine.stato !== 'Consegnato'"
          class="btn btnClr"
          (click)="cambiaStato(ordine.iD_Ordine)"
        >
          {{ "ORDERS.ACTION" | translate }}
        </button>
      </div>
      <ul class="list-unstyled mt-2">
        <li *ngFor="let dettaglio of ordine.dettagliOrdine" class="mb-2">
          <p>{{ "ORDERS.QUANTITY" | translate }}: {{ dettaglio.quantita }}</p>
          <p>{{ "ORDERS.DISH" | translate }}: {{ dettaglio.piatto.nome }}</p>
        </li>
      </ul>
      <p class="mt-2 font-weight-bold">
        {{ "ORDERS.TOTAL_ORDER_PRICE" | translate }}:
        {{
          calcolaPrezzoTotale(ordine.dettagliOrdine)
            | currency : "EUR" : "symbol"
        }}
      </p>
    </li>
  </ul>
</div>

<ng-template #noOrdini>
  <p class="text-center">{{ "ORDERS.NO_ORDERS" | translate }}</p>
</ng-template>
